# Path to your oh-my-zsh installation.
export ZSH="$HOME/.oh-my-zsh"
autoload -U add-zsh-hook

source "$HOME/.local_zsh" &> /dev/null

#ssh foo.net $BOOTSTRAP_DOTFILES
export BOOTSTRAP_DOTFILES='sh -c "$(curl -fsLS get.chezmoi.io)" -- init --apply traverseda'

alias nvim="neovim"
alias vim="neovim"

#If sudo is an alias we can use aliases in sudo...
alias sudo='sudo '
alias psudo='sudo env "PATH=$PATH '

ZSH_THEME="robbyrussell"
zmodload zsh/zpty

source $ZSH/oh-my-zsh.sh

#Set nix commands to use completion for generic gnu utils
compdef _precommand nix

export EDITOR='nvim'
export HISTCONTROL=ignoredups
export ACT_CACHE_AUTH_KEY=aeThooc0

alias e="neovim-remote --remote"
if (( ${+NVIM} )); then
  export EDITOR=~/.local/bin/nvr-edit
  alias vim="neovim-remote --remote"
  #Figure out what our buffer should be
  export VIM_BUFFER="term://${PWD/#$HOME/~/}/$$:${SHELL}"
  add-zsh-hook chpwd update_buffer_name
fi

#Change buffer name when we CD
#Helpful for vim sessions.
update_buffer_name() {
  neovim-remote --remote-expr "ChangeBufferName(\"$VIM_BUFFER\", \"term://${PWD/#$HOME/~/}/$$:${SHELL}\")" &> /dev/null
  export VIM_BUFFER="term://${PWD/#$HOME/~/}/$$:${SHELL}"
}

export PATH="$HOME/bin:$PATH:$HOME/.local/bin"

