# Path to your oh-my-zsh installation.
export ZSH="$HOME/.oh-my-zsh"
autoload -U add-zsh-hook

alias vim="nvim"
ZSH_THEME="robbyrussell"
plugins=(git)

zmodload zsh/zpty

source $ZSH/oh-my-zsh.sh

export EDITOR='nvim'
export HISTCONTROL=ignoredups
export ACT_CACHE_AUTH_KEY=aeThooc0

alias e="nvr --remote"
if (( ${+NVIM} )); then
  export EDITOR=~/bin/nvr-edit
  alias vim="nvr --remote"
  #Figure out what our buffer should be
  export VIM_BUFFER="term://${PWD/#$HOME/~/}/$$:${SHELL}"
  add-zsh-hook chpwd update_buffer_name
fi

#Change buffer name when we CD
#Helpful for vim sessions.
update_buffer_name() {
  nvr --remote-expr "ChangeBufferName(\"$VIM_BUFFER\", \"term://${PWD/#$HOME/~/}/$$:${SHELL}\")" &> /dev/null
  export VIM_BUFFER="term://${PWD/#$HOME/~/}/$$:${SHELL}"
}



